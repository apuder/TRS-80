<!DOCTYPE html>
<html manifest="cache.manifest">
<head>
<title>TRS 80</title>
<meta http-equiv="Cache-Control"
	content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script
	src="//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js"></script>

<script type="text/javascript">


	window.addEventListener('load', function() {
		window.console.log('# Load #');
	    // window.mediaManager = new cast.receiver.MediaManager(mediaElement);	    
	    window.castReceiverManager = cast.receiver.CastReceiverManager.getInstance();
 	    var customMessageBus =
	    	window.castReceiverManager.getCastMessageBus(
	    			'urn:x-cast:org.puder.trs80');
	    window.screenWrapper = document.getElementById('screenWrapper');

		customMessageBus.onMessage = function(event) {
			var data = event.data;
			// TODO: Support different kinds of data.
			// TODO: Support different kinds of screens.
			
			var preContent = "";
			for (var i = 0; i < data.length; ++i) {
				if (i % 64 == 0 && i > 0) {
					preContent += "\n";
				}
				preContent += data[i];
			}
			$('#screen').text(preContent);
		};
	    window.castReceiverManager.start();
 	});

</script>
<style>

@font-face {
	font-family: 'TreasureMIII64C';
	src: url('AnotherMansTreasureMIII64C.ttf');
}
@font-face {
	font-family: 'TreasureMIII32C';
	src: url('AnotherMansTreasureMIII32C.ttf');
}

html {
	background-color: black;
	height:100%;
}

body {
	text-align:center;
	background:#221;
	height:100%;
	border:0;
	margin:0;
}

#screen {
  color:#3c3;
  text-align: center;
  font-family:'TreasureMIII64C';
  font-size:36px;
  display:inline-block;
  background:black;
  border:0;
}


</style>
</head>
<body>
	<div id="screenWrapper"><pre id="screen"></pre></div>
</body>
</html>